{% extends "base.html" %}
{% load static %}
{% load filters %}
{% load i18n %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_js %}
<script>


    $(document).ready(function () {
        var initialData = {{ initial_data | jsonify }};
        vm = new ChapterQuestion(initialData.chapter_id);
        ko.applyBindings(vm);
//        if (initialData.questions) {
//            var mapping = {
//                'entry_rows': {
//                    create: function (options) {
//                        var entry_row = ko.mapping.fromJS(options.data, {copy: []}, new PaymentEntryRow(ko_data.emp_options.slice(0)));
//                        // if (typeof(options.parent.paid_from_date_input()) == 'undefined') {
//                        //     options.parent.paid_from_date_input(options.data.paid_from_date);
//                        //     options.parent.paid_to_date_input(options.data.paid_to_date);
//                        // }
//                        return entry_row;
//                    }
//                },
//                // 'branch': {
//                //     create: function(options){
//                //         console.log(options.data)
//                //         if(options.data == null){
//                //             return 'ALL'
//                //         }
//                //         return options.data
//                //     }
//                // }
//            };
//            ko.mapping.fromJS(ko_data.ctx_data, mapping, vm);
//
//        }
    });
</script>
<script type="text/javascript" src="{% static 'public/plugins/knockout/dist/knockout.js' %}"></script>
<script type="text/javascript" src="{% static 'public/plugins/knockout-mapping/knockout.mapping.js' %}"></script>
<script type="text/javascript" src="{% static 'public/academy/js/chapterquestion_form.js' %}"></script>
{% endblock %}

{% block content %}
<form>
    <!-- ko foreach: questions -->
        {{ forms.question_form }}
        <!-- ko foreach: choices -->
            {{ forms.choice_form }}
        <!-- /ko -->
        <button data-bind="click: add_choice, visible: choices().length > 0" class="btn btn-primary">{% trans 'Add Choice' %}</button>
    <!-- /ko -->
    <button data-bind="click: add_question" class="btn btn-primary">{% trans 'Add Question' %}</button>
</form>

{% endblock %}
