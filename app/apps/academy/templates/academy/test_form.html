{% extends "base.html" %}
{% load static %}
{% load filters %}
{% load i18n %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_js %}
    <script>
        $(document).ready(function () {
            var initialData = {{ initial_data | jsonify }};
            var vm = new Test();
            ko.applyBindings(vm);
            {#            if (initialData.questions) {#}
            {#                var mapping = {#}
            {#                    'questions': {#}
            {#                        create: function (options) {#}
            {#                            var question_mapping = {#}
            {#                                'choices': {#}
            {#                                    create: function (options) {#}
            {#                                        var choice = ko.mapping.fromJS(options.data, {}, new Choice());#}
            {#                                        return choice;#}
            {#                                    }#}
            {#                                },#}
            {#                                'image': {#}
            {#                                    update: function (options) {#}
            {#                                        if (!options.data) {#}
            {#                                            return {#}
            {#                                                dataURL: ko.observable()#}
            {#                                            }#}
            {#                                        } else {#}
            {#                                            return {#}
            {#                                                dataURL: ko.observable(options.data)#}
            {#                                            }#}
            {#                                        }#}
            {#                                    }#}
            {#                                }#}
            {#                            };#}
            {##}
            {#                            var question = ko.mapping.fromJS(options.data, question_mapping, new Question());#}
            {##}
            {#                            return question;#}
            {#                        }#}
            {#                    }#}
            {#                };#}
            {#                ko.mapping.fromJS(initialData, mapping, vm);#}
            {#            }#}
        });
    </script>
    <script type="text/javascript" src="{% static 'public/plugins/knockout/dist/knockout.js' %}"></script>
    <script type="text/javascript" src="{% static 'public/plugins/knockout-mapping/knockout.mapping.js' %}"></script>
    <script type="text/javascript" src="{% static 'public/plugins/knockout-bindings/bindings.js' %}"></script>
    <script type="text/javascript"
            src="{% static 'public/plugins/knockout-file-bindings/knockout-file-bindings.js' %}"></script>

    <script type="text/javascript"
            src="{% static 'public/plugins/bootstrap-toggle/js/bootstrap-toggle.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'public/plugins/blockUI/jquery.blockUI.js' %}"></script>
    <script type="text/javascript" src="{% static 'public/plugins/toastr/toastr.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'public/plugins/jsutil/App.js' %}"></script>
    <script type="text/javascript" src="{% static 'public/academy/js/test_form.js' %}"></script>
{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css"
          href="{% static 'public/plugins/bootstrap-toggle/css/bootstrap-toggle.min.css' %}">
    <link rel="stylesheet" type="text/css"
          href="{% static 'public/plugins/toastr/toastr.min.css' %}">
    <link rel="stylesheet" type="text/css"
          href="{% static 'public/plugins/knockout-file-bindings/knockout-file-bindings.css' %}">
{% endblock %}

{% block content %}

    <form data-bind="submit: save" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="card bg-faded">
            <div class="card-block">
                {{ forms.test_create_form }}
            </div>
            {#            This div is for selected course chapters#}
            <div class="card-block">
                <!-- ko foreach: selected_course_chapter_questions -->


                <div id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="card">
                        <div class="card-header" role="tab"
                             data-bind="attr: { id: 'chq-title' + String($data.id) }">
                            <h5 class="mb-0">
                                <a data-toggle="collapse" data-parent="#accordion"
                                   aria-expanded="true"
                                   data-bind="attr: { 'href': '#' + 'chq-body' + String($data.id), 'aria-controls': 'chq-body' + String($data.id) }, text: $data.name">
                                </a>
                            </h5>
                        </div>

                        <div class="collapse show" role="tabpanel"
                             data-bind="attr: { 'aria-labelledby': 'chq-title' + String($data.id), 'id': 'chq-body' + String($data.id) }">
                            <div class="card-block">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad
                                squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck
                                quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it
                                squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica,
                                craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur
                                butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth
                                nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /ko -->
            </div>

    </form>

{% endblock %}
